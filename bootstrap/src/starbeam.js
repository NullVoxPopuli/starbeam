import findWorkspaceDir from "@pnpm/find-workspace-dir";
import { dirname } from "path";
import { fileURLToPath } from "url";
import { Workspace } from "./compile.js";
const dir = dirname(fileURLToPath(import.meta.url));
const root = await findWorkspaceDir.default(dir);
if (root === undefined) {
    console.error(`Couldn't find workspace root from ${dir}`);
    process.exit(1);
}
const WORKSPACE = await Workspace.create(root, "@starbeam");
console.log({ root, packages: WORKSPACE.packages });
for (let pkg of WORKSPACE.packages) {
    await pkg.compile();
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhcmJlYW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzdGFyYmVhbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLGdCQUFnQixNQUFNLDBCQUEwQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDL0IsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLEtBQUssQ0FBQztBQUNwQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBRXpDLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3BELE1BQU0sSUFBSSxHQUFHLE1BQU0sZ0JBQWdCLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBRWpELElBQUksSUFBSSxLQUFLLFNBQVMsRUFBRTtJQUN0QixPQUFPLENBQUMsS0FBSyxDQUFDLHFDQUFxQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQzFELE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FDakI7QUFJRCxNQUFNLFNBQVMsR0FBRyxNQUFNLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBRTVELE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLFNBQVMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBRXBELEtBQUssSUFBSSxHQUFHLElBQUksU0FBUyxDQUFDLFFBQVEsRUFBRTtJQUNsQyxNQUFNLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztDQUNyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmaW5kV29ya3NwYWNlRGlyIGZyb20gXCJAcG5wbS9maW5kLXdvcmtzcGFjZS1kaXJcIjtcbmltcG9ydCB7IGRpcm5hbWUgfSBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgZmlsZVVSTFRvUGF0aCB9IGZyb20gXCJ1cmxcIjtcbmltcG9ydCB7IFdvcmtzcGFjZSB9IGZyb20gXCIuL2NvbXBpbGUuanNcIjtcblxuY29uc3QgZGlyID0gZGlybmFtZShmaWxlVVJMVG9QYXRoKGltcG9ydC5tZXRhLnVybCkpO1xuY29uc3Qgcm9vdCA9IGF3YWl0IGZpbmRXb3Jrc3BhY2VEaXIuZGVmYXVsdChkaXIpO1xuXG5pZiAocm9vdCA9PT0gdW5kZWZpbmVkKSB7XG4gIGNvbnNvbGUuZXJyb3IoYENvdWxkbid0IGZpbmQgd29ya3NwYWNlIHJvb3QgZnJvbSAke2Rpcn1gKTtcbiAgcHJvY2Vzcy5leGl0KDEpO1xufVxuXG50eXBlIFN0YXJiZWFtUGFja2FnZTxQIGV4dGVuZHMgc3RyaW5nPiA9IGBAc3RhcmJlYW0vJHtQfWA7XG5cbmNvbnN0IFdPUktTUEFDRSA9IGF3YWl0IFdvcmtzcGFjZS5jcmVhdGUocm9vdCwgXCJAc3RhcmJlYW1cIik7XG5cbmNvbnNvbGUubG9nKHsgcm9vdCwgcGFja2FnZXM6IFdPUktTUEFDRS5wYWNrYWdlcyB9KTtcblxuZm9yIChsZXQgcGtnIG9mIFdPUktTUEFDRS5wYWNrYWdlcykge1xuICBhd2FpdCBwa2cuY29tcGlsZSgpO1xufVxuIl19